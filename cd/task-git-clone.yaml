apiVersion: tekton.dev/v1beta1
kind: Task
metadata:
  name: git-clone
spec:
  workspaces:
    - name: output
      description: "NÆ¡i chá»©a mÃ£ nguá»“n"
  params:
    - name: url
      type: string
    - name: branch
      type: string
      default: "main"
  steps:
    - name: clone
      image: alpine/git:latest
      securityContext:
        runAsUser: 0
      script: |
        #!/usr/bin/env sh
        set -e
        # Dá»n dáº¹p sáº¡ch sáº½ workspace trÆ°á»›c khi kÃ©o code má»›i
        rm -rf $(workspaces.output.path)/*
        rm -rf $(workspaces.output.path)/.[!.]*
        echo "ğŸš€ Äang clone branch [$(params.branch)] tá»«: $(params.url)"
        git clone --depth 1 -b $(params.branch) $(params.url) $(workspaces.output.path)
        echo "âœ… Clone thÃ nh cÃ´ng!"