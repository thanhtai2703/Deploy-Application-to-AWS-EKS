apiVersion: tekton.dev/v1
kind: Task
metadata:
  name: deploy
spec:
  params:
    - name: repository-url
      description: URL cá»§a kho mÃ£ nguá»“n
      type: string
    - name: branch-name
      description: NhÃ¡nh git
      type: string
    - name: service-name
      description: ThÆ° má»¥c service (frontend/backend)
      type: string
    - name: action-type
      description: HÃ nh Ä‘á»™ng cáº§n thá»±c hiá»‡n
      type: string
    - name: message
      description: ThÃ´ng bÃ¡o máº·c Ä‘á»‹nh
      type: string
      default: "Báº¯t Ä‘áº§u tiáº¿n trÃ¬nh CD..."
  steps:
    - name: display-pipeline-info
      image: alpine:3
      script: |
        #!/bin/sh
        echo "==========================================="
        echo "ğŸš€ THÃ”NG TIN DEPLOY"
        echo "==========================================="
        echo "ğŸ“¦ Repo:    $(params.repository-url)"
        echo "ğŸŒ¿ Branch:  $(params.branch-name)"
        echo "ğŸ“‚ Service: $(params.service-name)"
        echo "ğŸ› ï¸  Action:  $(params.action-type)"
        echo "ğŸ’¬ Message: $(params.message)"
        echo "==========================================="
        
        # VÃ­ dá»¥ logic sau nÃ y cá»§a báº¡n:
        echo "Äang di chuyá»ƒn vÃ o thÆ° má»¥c: /$(params.service-name)"
        # cd $(params.service-name)
        # npm install && npm run build